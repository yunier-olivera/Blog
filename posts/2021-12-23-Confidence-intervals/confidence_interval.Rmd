---
title: "El intervalo de confianza"
author: Yunier Olivera
date: "`r format(Sys.time(), '%b %d, %Y')`"
output:
  bookdown::word_document2:
    toc: yes
    number_sections: no
  bookdown::html_document2:
    df_print: paged
    toc: yes
    toc_float:
        collapsed: no
    number_sections: no
    self_contained: no
bibliography: references.bib
csl: ../../resources/coral-reefs-es.csl
---


# Intro

Los **intervalos de confianza** (IC, en inglés CI) es el rango dentro del cual se encuentra la media verdadera o la diferencia entre las medias. Normalmente se expresa el 90%, 95% o 99 % del intervalo de confianza.

Para calcular el IC se multiplica el EE por un valor que cambia de acuerdo con el porcentaje que se desee:

$$
90\% \ IC = 1.65 \times EE \\[5pt]
95\% \ IC = 1.96 \times EE \\[5pt]
99\% \ IC = 2.58 \times EE
$$

Cuando se grafica, el valor 1.96 para el 95 % IC se puede redondear a 2, porque visualmente no se distingue mucho; pero en las tablas se debe multiplicar por el valor exacto.



# Cálculo del intervalo de confianza en R

```{r}


library(tidyverse)
library(boot)

shapes <- c(0.5, 1, 1.3, 2, 1.8)

y <- tibble(year = rep(2018:2022, each = 20),
       index = map(shapes, rgamma, n = 20) |>
          as_vector()
)

#  for bootstrapped confidence intervals
mean_boot <- \(u, i) mean(u[i]) # '\' is a shorthand for function()



y |> 
   group_nest(year) |> 
   mutate(booty = map(data, ~boot(.x$index, statistic = mean_boot,
                                  R = 9999))) |> 
   pluck("booty") |> # extract bootstrapped data
   map(~boot.ci(., type = "perc")) |> # CI
   map(pluck("percent")) |> # 95% percentile
   enframe() |> 
   unnest_wider(value) |> 
   cbind(y |> 
            group_nest(year) |> 
            select(-data))




#if the data were normal
# https://bookdown.org/logan_kelly/r_practice/p09.html
```

# Referencias
